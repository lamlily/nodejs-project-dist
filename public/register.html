
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link href="static/h-ui/css/H-ui.min.css" rel="stylesheet" type="text/css" />
<link href="static/h-ui.admin/css/H-ui.login.css" rel="stylesheet" type="text/css" />
<link href="static/h-ui.admin/css/style.css" rel="stylesheet" type="text/css" />
<link href="lib/Hui-iconfont/1.0.8/iconfont.css" rel="stylesheet" type="text/css" />
<!--[if IE 6]>
<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script><![endif]-->
<title>后台注册 - H-ui.admin.page v3.0</title>
<meta name="keywords" content="H-ui.admin v3.0,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
<meta name="description" content="H-ui.admin v3.0，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
</head>
<body>
<input type="hidden" id="TenantId" name="TenantId" value="" />
<div class="header"></div>
<div class="loginWraper">
    <div id="loginform" class="loginBox">
        <a href="./login.html">已有账号！登录</a>

        <form class="form form-horizontal">
            <div class="row cl">
                <label class="form-label col-xs-3"><i class="Hui-iconfont">&#xe60d;</i></label>
                <div class="formControls col-xs-8">
                    <input id="youxiang" name="" type="text" placeholder="账户" class="input-text size-L">
                </div>
            </div>
            <div class="row cl">
                <label class="form-label col-xs-3"><i class="Hui-iconfont">&#xe60e;</i></label>
                <div class="formControls col-xs-8">
                    <input id="mima" name="" type="password" placeholder="密码" class="input-text size-L">
                </div>
            </div>
            <div class="row cl">
                <div class="formControls col-xs-8 col-xs-offset-3">
                    <input id="yanzhengma" class="input-text size-L" type="text" placeholder="验证码" onblur="if(this.value==''){this.value='验证码:'}" onclick="if(this.value=='验证码:'){this.value='';}" value="验证码:" style="width:150px;">
                    <a id="kanbuq" href="javascript:;">点击获取邮箱验证码</a>
                    <span class="code" style="display:inline-block;font-size:18px;text-align:center;line-height:30px;border:1px solid #ccc;background:#eee;"></span>
                    
                </div>
            </div>
           <p> 477800458@qq.com </p>    <p>123456</p>  
            <div class="row cl">
                <div class="formControls col-xs-8 col-xs-offset-3">
                    <input name="" type="submit" id="zhuce" class="btn btn-success radius size-L" value="&nbsp;注&nbsp;&nbsp;&nbsp;&nbsp;册&nbsp;">
                    <input name="" type="reset" class="btn btn-default radius size-L" value="&nbsp;取&nbsp;&nbsp;&nbsp;&nbsp;消&nbsp;">
                </div>
            </div>
        </form>
    </div>
</div>
<div class="footer">Copyright 你的公司名称 by H-ui.admin.page.v3.0</div>

<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<!-- <script type="text/javascript" src="./javascripts/jquery.js"></script> -->
<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="./javascripts/common.js"></script>
<!-- <script>
    let rootpath='http://127.0.0.1:3000';

    // 477800458@qq.com

    //检查邮箱名是否被占用
    let yanzheng = true;
    $("#youxiang").on("change",function(){
        let name = $("#youxiang").val().trim();
        // 邮箱正则
        var reg = new RegExp("^[a-z0-9A-Z]+[- | a-z0-9A-Z . _]+@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\\.)+[a-z]{2,}$"); 
        // 验证邮箱
        if(name == ''){
              alert("邮箱不能为空！");
            return false;
        }else if(!reg.test(name)){
            alert("邮箱格式不正确，请重新输入！");
            return false;
        }
        else{
            let url="http://127.0.0.1:3000/setting/findUser";
            let data={
                name:name
            }
            $.post(url,data,function(res){
                // console.log(res)
                if (res=="fail") {
                    alert("邮箱名已占用！");
                    yanzheng=false;
                    
                }else{
                    yanzheng=true;
                }
            })
        }
    })

    //发送验证码
    // $("#kanbuq").on("click",function(){
    //     let name = $("#youxiang").val().trim();
    //     let url=rootpath+'/admin/getCode';
    //     let data={
    //         name:name
    //     }
    //     if(yanzheng){
    //         $.post(url,data,function(res){
    //             // console.log(res)
    //             if (res.err==0) {
    //                 alert("验证码发送ok");
    //             }
    //         })
    //     }else{
    //         alert("请输入有效邮箱！");
    //     }
    // })


    //注册
    $("#zhuce").on("click",function(){

        let name = $("#youxiang").val().trim();
        let pass = $("#mima").val().trim();
        let code = $("#yanzhengma").val().trim();
        if(pass.length<6){
            alert("密码长度不小于6！");
        }
        let url="http://127.0.0.1:3000/setting/addUser";
        let data={
            name:name,
            pass:pass,
            code:code
        }
        if(yanzheng){
            $.post(url,data,function(res){
                console.log(res)
                if (res=='success') {
                    Cookie.setCookie("admin",name);
                    location.href="index.html";
                    // alert("注册成功");
                }else{
                    alert("注册失败！");
                }
            })
        }else{
            alert("请输入有效邮箱！");
        }
        return false;
        
    })



    // 随机验证码
    // 默认打开页面即生成一个
    $(".code").css({"background":randomColor(16),"width":"70px","height":"30px","display":"inline-block","text-align":"center"});
    $(".code").html(randomCode(4));
    // 点击验证码生成一个新的验证码
    $("#kanbuq").click(function(){
        $(".code").css({"background":randomColor(16),"width":"70px","height":"30px","display":"inline-block","text-align":"center"});
        $(".code").html(randomCode(4));
    });



var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?080836300300be57b7f34f4b3e97d911";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();


</script> -->



<!-- <script src="javascripts/jquery.js"></script> -->
<script src="javascripts/register.js"></script>



</body>
</html>